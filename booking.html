<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Book Ticket - Train Portal</title>
  <link rel="stylesheet" href="../css/navbar.css">
  <link rel="stylesheet" href="../css/booking.css">
</head>
<body>

<!-- NAVBAR -->
<header class="top-nav">
  <div class="logo">ğŸš† Train Portal</div>
  <nav>
    <a href="home.html" class="nav-link">Home</a>
    <a href="train-search.html" class="nav-link">Train Search</a>
    <a href="booking-history.html" class="nav-link">My Bookings</a>
    <button class="logout-btn" onclick="logout()">Logout</button>
  </nav>
</header>

<div class="booking-container">
  
  <!-- TRAIN INFO CARD -->
  <div class="train-info-card">
    <h2 id="trainName">12901 - Gujarat Express</h2>
    <div class="route-info">
      <span id="fromStation">Ahmedabad</span>
      <span class="arrow">â†’</span>
      <span id="toStation">Mumbai</span>
    </div>
    <div class="train-details">
      <span id="trainClass">3AC</span>
      <span>â€¢</span>
      <span id="trainTime">06:45 AM</span>
    </div>
  </div>

  <!-- TRAVEL DATE SELECTION -->
  <div class="booking-card">
    <h3>Select Travel Date</h3>
    
    <div class="date-selector">
      <label>Journey Date *</label>
      <div class="date-input-wrapper">
        <input type="text" id="travelDateDisplay" placeholder="Select travel date" readonly>
        <span class="calendar-icon" onclick="toggleCalendar()">ğŸ“…</span>
      </div>
      
      <!-- CUSTOM CALENDAR -->
      <div class="custom-calendar" id="customCalendar" style="display: none;">
        <div class="calendar-header">
          <button type="button" onclick="changeMonth(-1)">â—€</button>
          <span id="currentMonth">January 2026</span>
          <button type="button" onclick="changeMonth(1)">â–¶</button>
        </div>
        <div class="calendar-weekdays">
          <div>Sun</div><div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div>
        </div>
        <div class="calendar-days" id="calendarDays"></div>
      </div>
    </div>

    <div class="date-info">
      <p>ğŸ“Œ You can book tickets up to 3 months in advance</p>
      <p>â° Selected Date: <strong id="selectedDateText">Not selected</strong></p>
    </div>
  </div>

  <!-- NUMBER OF TICKETS -->
  <div class="booking-card">
    <h3>Number of Passengers</h3>
    
    <div class="form-group">
      <label>How many tickets? (Maximum 6) *</label>
      <select id="ticketCount" onchange="updatePassengerCount()">
        <option value="">Select number of tickets</option>
        <option value="1">1 Passenger</option>
        <option value="2">2 Passengers</option>
        <option value="3">3 Passengers</option>
        <option value="4">4 Passengers</option>
        <option value="5">5 Passengers</option>
        <option value="6">6 Passengers</option>
      </select>
    </div>

    <div class="info-box">
      <p>â„¹ï¸ You can book a maximum of 6 tickets in one booking</p>
    </div>
  </div>

  <!-- PASSENGER DETAILS FORMS -->
  <div id="passengerForms"></div>

  <!-- CONTACT DETAILS -->
  <div class="booking-card">
    <h3>Contact Details</h3>
    
    <div class="form-row">
      <div class="form-group">
        <label>Mobile Number *</label>
        <input type="tel" id="contactMobile" placeholder="10 digit mobile number" maxlength="10" required>
      </div>
      
      <div class="form-group">
        <label>Email</label>
        <input type="email" id="contactEmail" placeholder="email@example.com">
      </div>
    </div>

    <div class="error-message" id="errorMessage"></div>
  </div>

  <!-- PAYMENT SECTION -->
  <div class="booking-card">
    <h3>Payment Details</h3>
    
    <div class="fare-summary">
      <div class="fare-row">
        <span>Base Fare (per ticket)</span>
        <span>â‚¹850</span>
      </div>
      <div class="fare-row">
        <span>Number of Tickets</span>
        <span id="ticketCountDisplay">0</span>
      </div>
      <div class="fare-row">
        <span>Subtotal</span>
        <span id="subtotalFare">â‚¹0</span>
      </div>
      <div class="fare-row">
        <span>GST (5%)</span>
        <span id="gst">â‚¹0</span>
      </div>
      <div class="fare-row total">
        <span>Total Amount</span>
        <span id="totalFare">â‚¹0</span>
      </div>
    </div>

    <div class="form-group">
      <label>Payment Method *</label>
      <select id="paymentMethod" required>
        <option value="">Select Payment Method</option>
        <option>UPI</option>
        <option>Credit Card</option>
        <option>Debit Card</option>
        <option>Net Banking</option>
      </select>
    </div>

    <div class="form-group">
      <label>Card/UPI Details *</label>
      <input type="text" id="paymentDetails" placeholder="Enter payment details" required>
    </div>

    <div class="button-group">
      <button class="secondary-btn" onclick="window.location.href='train-search.html'">Back to Search</button>
      <button class="primary-btn" onclick="confirmBooking()">Confirm & Pay</button>
    </div>
  </div>

</div>

<script src="../js/booking.js"></script>
</body>
</html>